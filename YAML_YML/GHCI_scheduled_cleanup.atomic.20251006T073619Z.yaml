workflow:
  ns: GHCI
  wf: SCHEDULED_CLEANUP
  wfv: v1
  title: "Nightly repo maintenance"
  trigger:
    on:
      schedule: ["0 2 * * *"]
      workflow_dispatch: {}
  purpose: "Run cleanup script to remove orphaned files/artifacts."
  registry_generated: true

atoms:
  - atom_uid: 01JAX0A0SCHCLN001
    atom_key: GHCI/SCHEDULED_CLEANUP/v1/PH1/CHECKOUT/001
    title: Checkout
    deps: []
    commands:
      - gha: "actions/checkout@v4"

  - atom_uid: 01JAX0A0SCHCLN002
    atom_key: GHCI/SCHEDULED_CLEANUP/v1/PH2/CLEAN/002
    title: Cleanup orphans (dry-run by default)
    deps: [GHCI/SCHEDULED_CLEANUP/v1/PH1/CHECKOUT/001]
    commands:
      - run: "python scripts/cleanup_orphans.py --dry-run"
